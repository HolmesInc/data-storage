<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Data Room</title>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Sweetalert2 - Beautiful alerts -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/user-settings.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="fas fa-file-cabinet"></i> Data Room
            </span>
            <div class="nav-item d-flex gap-2">
                <span class="text-white d-flex align-items-center me-3">
                    <i class="fas fa-user-circle me-2"></i>
                    <span id="currentUsername">User</span>
                </span>
                <a href="index.html" class="btn btn-light btn-sm" title="Back to Dashboard">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <button class="btn btn-outline-light btn-sm" id="logoutBtn" title="Logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </nav>

    <div class="settings-container">
        <!-- Settings Header -->
        <div class="settings-header">
            <h1><i class="fas fa-cog me-2"></i>Settings</h1>
            <p>Manage your account and application settings</p>
        </div>

        <!-- Settings Layout -->
        <div class="settings-layout">
            <!-- Sidebar Navigation -->
            <aside class="settings-sidebar">
                <ul class="settings-nav">
                    <li class="settings-nav-item">
                        <a href="#" class="settings-nav-link active" data-section="storage-gateways">
                            <i class="fas fa-server"></i>
                            Storage Gateways
                        </a>
                    </li>
                    <!-- Future sections can be added here -->
                    <!-- <li class="settings-nav-item">
                        <a href="#" class="settings-nav-link" data-section="notifications">
                            <i class="fas fa-bell"></i>
                            Notifications
                        </a>
                    </li>
                    <li class="settings-nav-item">
                        <a href="#" class="settings-nav-link" data-section="security">
                            <i class="fas fa-shield-alt"></i>
                            Security
                        </a>
                    </li> -->
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="settings-content">
                <!-- Storage Gateways Section -->
                <section id="storage-gateways" class="settings-section active">
                    <div class="section-header">
                        <h2><i class="fas fa-server me-2"></i>Storage Gateways</h2>
                        <p>Configure external storage and notification services</p>
                    </div>

                    <form id="storageGatewaysForm">
                        <!-- Telegram Settings -->
                        <div class="settings-form-group">
                            <label for="telegramChatId">
                                <i class="fab fa-telegram me-2" style="color: #0088cc;"></i>Telegram Chat ID
                            </label>
                            <input
                                type="text"
                                id="telegramChatId"
                                name="telegramChatId"
                                placeholder="Enter your Telegram chat ID"
                                class="form-control"
                            >
                            <small>Your unique Telegram chat ID for receiving notifications. You can get it from @userinfobot on Telegram.</small>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="submit" class="btn-save">
                                <i class="fas fa-save me-2"></i>Save Changes
                            </button>
                            <button type="reset" class="btn-cancel">
                                <i class="fas fa-times me-2"></i>Cancel
                            </button>
                        </div>
                    </form>
                </section>
            </main>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/user-settings.js"></script>
<!--    <script>-->

<!--        /**-->
<!--         * Handle form submission-->
<!--         */-->
<!--        $('#storageGatewaysForm').on('submit', function(e) {-->
<!--            e.preventDefault();-->

<!--            const formData = {-->
<!--                telegram_chat_id: $('#telegramChatId').val()-->
<!--            };-->

<!--            // Validate that at least one field is filled-->
<!--            if (!formData.telegram_chat_id) {-->
<!--                Swal.fire({-->
<!--                    icon: 'warning',-->
<!--                    title: 'No Changes',-->
<!--                    text: 'Please fill in at least one field'-->
<!--                });-->
<!--                return;-->
<!--            }-->

<!--            // Show loading state-->
<!--            const $btn = $('[type="submit"]', this);-->
<!--            const originalText = $btn.html();-->
<!--            $btn.prop('disabled', true).html('<i class="fas fa-spinner fa-spin me-2"></i>Saving...');-->

<!--            // Send data to backend using API method-->
<!--            API.userSettings.storageGateways.createTelegramGateways(formData)-->
<!--                .done(function(response) {-->
<!--                    Swal.fire({-->
<!--                        icon: 'success',-->
<!--                        title: 'Settings Saved',-->
<!--                        text: 'Your Telegram gateway has been configured successfully',-->
<!--                        timer: 2000-->
<!--                    });-->
<!--                })-->
<!--                .fail(function(error) {-->
<!--                    let errorMessage = 'Failed to save settings';-->
<!--                    if (error.responseJSON && error.responseJSON.detail) {-->
<!--                        errorMessage = error.responseJSON.detail;-->
<!--                    }-->

<!--                    Swal.fire({-->
<!--                        icon: 'error',-->
<!--                        title: 'Error',-->
<!--                        text: errorMessage-->
<!--                    });-->
<!--                })-->
<!--                .always(function() {-->
<!--                    $btn.prop('disabled', false).html(originalText);-->
<!--                });-->
<!--        });-->
<!--    </script>-->
</body>
</html>
